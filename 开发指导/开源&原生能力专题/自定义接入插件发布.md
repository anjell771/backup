[TOC]

插件发布的流程见下图：
![](http://appcan-download.oss-cn-beijing.aliyuncs.com/%E5%85%AC%E6%B5%8B%2Fpub_plugin_inner.png)
其中开发者只需完成“提交”即可，AppCan平台会完成后续的步骤。

## 插件提交

当您完成插件开发后，需要在平台上提交您的插件以及相应的材料并在插件包的info.xml中声明插件相关内容。
> **提交地址：**首页导航点击**开发体系**，进入到**创建插件**

（1）需要提交的材料如下

- 插件

zip格式的插件包

- 插件图标

用于插件展示的图标，像素为225*180，大小一般小于80K

- 插件截图

用于插件展示的ui效果截图，像素为177～220*315～375， ui效果图可在[测试阶段](#测试 "测试阶段")时候完成

- 接口说明文档

开放的js接口列表以及参数说明
 > 文档形式：
* 可参考官方文档 [uexLocation](http://newdocx.appcan.cn/newdocx/docx?type=1403_975 "uexLocation")书写规范（进入文档详情页，点击右侧下载按钮提供md格式）提供md格式文档
 文档书写完毕可以把md放到github上，生成一个文档地址链接，第三方合作者和联系官方申请把md文档放到文档中心
* 也可以提供word，pdf格式文档，支持doc，docx，pdf格式

（2）在插件包的info.xml中声明插件相关内容如下

| 字段名  |字段值   |
| ------------ | ------------ |
| uexName  | 如:plugin1  |
| version  | 建议从:3.0.0累加  |
| build  | 填写最终发布的版本最后一位数字  |
| `<info>` |  填写最终发布出去的插件当前版本描述：如:xxx插件，也可以是修复bug描述 |
| `<build>`  | 填写累计修复问题：如:用于测试  |

info.xml具体描述文件，可参考：
````
<?xml version="1.0" encoding="utf-8"?>
<uexplugins>
    <plugin
        uexName="uexButton" version="3.0.4" build="4">
        <info>4:修复uexButton动态库在低版本手机上无法调用的问题</info>
        <build>3:修复可以创建同一id按钮的BUG</build>
        <build>2:添加设置字体大小，点击的回调方法改为onClick</build>
        <build>0:系统按钮插件</build>
    </plugin>
</uexplugins>
````
另外，插件匹配的平台系统版本号需要引擎辅助产品线来确定。原则是：

- 插件开发者期望在哪个开发环境上线插件
- 插件功能兼容的平台系统版本。这一项需要QA和产品线一起来测试确定。详细最低支持版本：Android2.2+ iOS6.0+
- 插件功能以官方发布的最新引擎版本来进行测试


标准的官方插件包是兼容IDE（即本地）和SDK（即在线）打包环境的，插件开发者需要确定能兼容的打包环境。具体类型请见《[附录]( #附录 "附录")》。

（3）开发者提交插件时，在导航开发体系中可选 '创建插件'和 '我的分享'来更新插件

* 提交新建插件时，info.xml中声明的插件名必须是插件库不存在的，否则新建插件将不被审核通过
* 更新插件时，info.xml中声明的插件名必须是插件库中存在的(且插件属于当前开发者)，否则更新插件将被退回
* 提交新建插件时，如果提交的插件包不能上传到对应android或iOS位置，否则新建插件将不被审核通过
* 提交新建插件时，如果提交的插件包只有插件包，没有测试demo或接口文档，否则新建插件将不被审核通过

## 审核

PM审核插件提交者资质：

- 是否具有正式上线的意义
- 定义插件所属等级

审核不通过则退回开发者。

## 测试

QA验证插件功能：

- 通过打包平台的[插件引擎模块](http://dashboard.appcan.cn/plugin "插件引擎模块")检测新建插件和更新插件，根据规则通过或退回插件(规则[详见](http://newdocx.appcan.cn/newdocx/docx?type=1382_1291 "插件引擎使用手册")插件提交步骤)
- Review插件源代码，检查是否有恶意或者明显缺陷代码
- 查看接口与文档是否一致
- 验证接口基本功能（`注：必须优先以在线打包测试为准`）
- 对照开发者提交的材料，验证插件和平台系统的兼容性
 

功能验证不通过则退回开发者。

## 上线

RD/OP根据开发者提交材料操作插件上线。
>**提交地址：**首页导航点击**开发体系**，进入到**创建插件**
> **上线地址：**  官方[插件中心](http://plugin.appcan.cn/ "点击跳转")，便于用户使用


上线规则：

- 上线前必须通知到PM,RD和QA负责人
- 一般为理攀上线，李露为上线人员备份
- 上线时间必须在10:00-18:00，方便QA做回归
- 必须RD和QA一起上线。如不能满足，则推迟上线

审核通过规则：

* 提交新建插件时，如果提交的插件包不能上传到对应android或iOS位置，否则新建插件将不被审核通过
* 提交新建插件时，如果提交的插件包只有插件包，没有测试源码demo或接口文档，否则新建插件将不被审核通过
* 提交新建插件时，如果提交的插件没有描述插件功能的，否则新建插件将不被审核通过


## 回归

RD上线完成后，QA立即进行线上回归。

回归规则：

- 回归时，需要回归插件兼容的所有平台系统
- 需要保证插件兼容的开发环境(不兼容的打包平台需要注解，兼容的打包环境需要注解并可以下载插件)
- 如果出现插件上线问题(如安装失败，功能不正常，不兼容等情况)，半个小时之内必须下线插件。如果超过半小时，则有惩罚措施。 

## 下线

> **温馨提示：**如果个人用户在集成过程中遇到问题，可及时联系官方人员，采取及时处理

当线上插件发现以下情况之一时可以采取下线处理。

- 具有重大Bug，造成应用/运行功能障碍
- 严重影响平台系统运行性能，导致运行崩溃
- 恶意窃取用户信息

由QA发起下线插件流程，PM核准，RD/OP进行下线操作，QA确认插件下线，并确认使用该插件的轻应用也进行下线(调整功能)操作。
## 附录
 
| SDK 插件和IDE插件区别| 安卓  | iOS  |
|------------ | ------------ | ------------ |
|IDE本地打包 |  dex文件夹放的是IDE打包用的jar文件 | .dylib    |
| SDK在线打包|  jar文件夹放的是SDK打包用的jar文件 |  .a |
> **注意：**IDE的插件包要把自己的src导出的jar跟三方jar合并
